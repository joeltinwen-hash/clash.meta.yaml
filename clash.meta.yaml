port: 7890
socks-port: 7891
allow-lan: true
external-controller: ':9090'
global-client-fingerprint: chrome
log-level: info
mode: script
script:
  enable: true
  # 注意：这里的脚本路径已经被我替换成了 CDN 加速链接！
  path: https://cdn.jsdelivr.net/gh/joeltinwen-hash/clash.meta.yaml@main/main.js
mitm:
  enable: true
  host:
    - '*.google.com'
    - '*.twitter.com'
    - 'api.example.com'
dns:
  enable: true
  listen: 0.0.0.0:1053
  ipv6: false
  use-hosts: true
  enhanced-mode: redir-host
  respect-rules: true
  fake-ip-range: 198.18.0.1/15
  default-nameserver: [223.5.5.5, 119.29.29.29]
  proxy-server-nameserver: [https://223.5.5.5/dns-query]
  nameserver: [https://dns.alidns.com/dns-query, https://doh.pub/dns-query]
  fallback: [https://1.1.1.1/dns-query, https://8.8.8.8/dns-query]
  fallback-filter: { geosite: [cn] }
  nameserver-policy:
    "geosite:cn,apple,category-games@cn": [223.5.5.5, 119.29.29.29]
    "geosite:private": [system]
proxy-providers:
  MySubscription:
    type: http
    # 注意：这里我们使用经过“脱敏”处理的安全订阅链接，您需要用自己的替换
    url: https://sub.xf.free.hr/api/v1/client/subscribe?token=YOUR_SECURE_TOKEN_HERE 
    interval: 3600
    path: ./proxies/sub.yaml
    health-check:
      enable: true
      url: http://www.google.com/generate_204
      interval: 600
proxy-groups:
  - {name: ✈️ Proxies, type: select, use: [MySubscription]}
  - {name: 🎯Direct, type: select, proxies: [DIRECT, ✈️ Proxies]}
  - {name: 🚀 Final, type: select, proxies: [✈️ Proxies, 🎯Direct]}
  - {name: 📺 YouTube, type: select, proxies: [✈️ Proxies, 🎯Direct]}
  - {name: 🎮 Bahamut, type: select, proxies: [✈️ Proxies, 🎯Direct]}
  - {name: 📚 Manga Shelf, type: select, proxies: [✈️ Proxies, 🎯Direct]}
  - {name: 🤖 AI, type: select, proxies: [✈️ Proxies, 🎯Direct]}
  - {name: 📲 Telegram, type: select, proxies: [✈️ Proxies, 🎯Direct]}
  - {name: 🐦 Twitter, type: select, proxies: [✈️ Proxies, 🎯Direct]}
  - {name: 💻 Microsoft, type: select, proxies: [🎯Direct, ✈️ Proxies]}
  - {name: 🍎 Apple, type: select, proxies: [🎯Direct, ✈️ Proxies]}
  - {name: 🌐 Google, type: select, proxies: [✈️ Proxies, 🎯Direct]}
  - {name: 🎵 Tiktok, type: select, proxies: [✈️ Proxies, 🎯Direct]}
rules:
  - MATCH,🚀 Final
